#!/usr/bin/env bash

function installmodule() {
  message="updating"

  if npm list -g "${@}" | grep "empty" >/dev/null; then
    message="installing"
  fi

  echo '-----------------------------------------------'
  echo -e "  ${@}: $message..."
  echo '-----------------------------------------------'

  npm install -g "${@}"

  echo ""
}

node_modules=(
  alex
  eslint_d
  feathers-cli
  fixjson
  gulp-cli
  imageoptim-cli
  jsonlint
  localtunnel
  ndb
  ngrok
  nodemon
  neovim
  prettier
  prettier_d_slim
  prettier-plugin-svelte
  @prettier/plugin-php
  server
  typescript
  yo

  # language servers
  vscode-langservers-extracted
  dockerfile-language-server-nodejs
  typescript-language-server
  pyright
  intelephense
  bash-language-server
  svelte-language-server
  vim-language-server

  # vim-imports-sort deps
  import-sort-cli
  import-sort-parser-babylon
  import-sort-parser-typescript
  import-sort-style-renke

  # ale deps
  lua-fmt
)

mac_modules=(
  alfred-npms
  alfred-fkill
)

for module in "${node_modules[@]}"; do
  installmodule $module
done

if [ $(uname -s) = "Darwin" ]; then
  for module in "${mac_modules[@]}"; do
    installmodule $module
  done
fi
