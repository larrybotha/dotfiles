default:
    @just --list

update:
    ~/.scripts/deps/.brew
    ~/.scripts/deps/.nvim
    ~/.scripts/deps/.python
    just -g update-nnn-plugins

update-all:
    ~/.scripts/deps/.all

update-only file:
    ~/.scripts/deps/.{{ file }}

vectorcode-db-start:
    #!/usr/bin/env bash

    cd ~/.config/vectorcode

    # if container running, indicate so, otherwise start it
    if test [[ docker ps -q --filter "name=vectorcode_chromadb" ]]; then
      echo "ChromaDB container already running"
    else
      echo "Starting vector code ChromaDB container..."
      docker compose up -d
      echo "vectorcode ChromaDB container started successfully"
    fi

vectorcode-db-stop:
    #!/usr/bin/env bash
    cd ~/.config/vectorcode

    docker compose down

update-nnn-plugins:
    #!/usr/bin/env bash

    set -euo pipefail

    url="https://raw.githubusercontent.com/jarun/nnn/master/plugins/getplugs"

    if curl -fsSL --connect-timeout 5 --max-time 10 "$url" \
        -o /dev/null 2>&1; then
      echo "internet available to update nnn plugins..."
    else
      echo "cannot reach GitHub - check internet connection"
      exit 1
    fi

    rm -rf "$HOME/.config/nnn/plugins"
    curl -Ls "$url" | sh
