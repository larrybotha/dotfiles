#!/usr/bin/env bash

# Make sure we’re using the latest Homebrew
brew update

# Upgrade any already-installed formulae
brew upgrade

# Install Mojave deps
brew install openldap libiconv

# Install GNU core utilities (those that come with OS X are outdated)
brew install coreutils
echo "Don’t forget to add $(brew --prefix coreutils)/libexec/gnubin to \$PATH."

# Install GNU `find`, `locate`, `updatedb`, and `xargs`, g-prefixed
brew install findutils

# Install Bash 4
brew install bash

# Install wget with IRI support
brew install wget --enable-iri

# Install RingoJS and Narwhal
# Note that the order in which these are installed is important; see http://git.io/brew-narwhal-ringo.
brew install ringojs
brew install narwhal

# Install more recent versions of some OS X tools
brew tap homebrew/dupes
brew install homebrew/dupes/grep
brew install php@73

brew tap homebrew/services

# Install rbenv for Ruby version management
# eval "$(rbenv init -)" is already added in .bash_profile
brew install rbenv ruby-build

# Install other useful binaries
brew install ack
brew install android-studio
brew install ansible
brew install codeception
brew install composer
brew install docker
brew install docker-machine
brew install ctags
brew install editorconfig
brew install elasticsearch
brew install flow
brew install git
brew install git-crypt
brew install git-flow
brew install go
brew install hub
brew install httpd
brew install httpie
brew install ios-webkit-debug-proxy
brew install jasmine
brew install lynx
brew install mysql
brew install nginx
brew install node
brew install nvm
brew install php-version
brew install phppgadmin
brew install phantomjs
brew install pigz
brew install postgresql
brew install python
brew install qt
brew install redis
brew install rename
brew install rhino
brew install sbt
brew install sequel-pro
brew install the_silver_searcher
brew install tree
brew install watchman
brew install webkit2png
brew install vim
brew install zopfli
brew install yarn

brew tap homebrew/versions
brew install lua52

# tmux and depdencies
brew install tmux
brew install reattach-to-user-namespace

# Install native apps
brew tap phinze/homebrew-cask
brew install brew-cask

function installcask() {
	if brew cask info "${@}" | grep "Not installed" > /dev/null; then
		brew cask install "${@}"
	else
		echo "${@} is already installed."
	fi
}

installcask alfred
installcask anki
installcask betterzip
installcask dash
installcask dropbox
installcask flux
installcask filezilla
installcask firefox
installcask google-app-engine-launcher
installcask google-chrome
installcask google-cloud-sdk
installcask haskell-platform
installcask imagealpha
installcask imageoptim
installcask integrity
installcask iterm2
installcask libreoffice
installcask miro-video-converter
installcask moom
installcask muzzle
installcask opera-next
installcask pckeyboardhack
installcask plex-media-server
installcask plex-home-theater
installcask quicklook-csv
installcask quicklook-json
installcask qlcolorcode
installcask qlmarkdown
installcask qlstephen
installcask qlvideo
installcask recordit
installcask robo-3t
installcask postman
installcask slack
installcask smoothmouse
installcask sourcetree
installcask sublime-text
installcask the-unarchiver
installcask thunderbird
installcask transmission
installcask vagrant
installcask vagrant-manager
installcask virtualbox
installcask vlc
installcask vox
installcask witch
installcask xscope

# Remove outdated versions from the cellar
brew cleanup
